{{- define "repo_tree_dir" -}}
<!DOCTYPE html>
<html>
	<head>
		{{ template "head_common" . }}
		<title>{{ .category_name }}/repos/{{ .repo_name }}/{{ .path_spec }}</title>
	</head>
	<body class="repo-tree-dir">
		<div class="padding-wrapper">
			<p>
				/{{ .path_spec }}/
			</p>
			<table id="file-tree">
				<thead>
					<tr>
						<th scope="col">Mode</th>
						<th scope="col">Name</th>
						<th scope="col">Size</th>
					</tr>
				</thead>
				<tbody>
					{{- $ref := .ref }}
					{{- $path_spec := .path_spec }}
					{{- range .files }}
						<tr>
							<td class="file-mode">{{ .Mode }}</td>
							<td class="file-name"><a href="{{ $path_spec }}/{{ .Name }}">{{ .Name }}</a>{{ if not .Is_file }}/{{ end }}</td>
							<td class="file-size">{{ .Size }}</td>
						</tr>
					{{- end }}
				</tbody>
			</table>
		</div>
		<div class="padding-wrapper">
			<div id="refs">
			</div>
		</div>
		<div class="padding-wrapper">
			<div id="readme">
				{{ .readme -}}
			</div>
		</div>
	</body>
</html>
{{- end -}}
